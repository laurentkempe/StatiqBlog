---
title: "Integration of NCover into Team City for Tech Head Brothers"
permalink: /2008/03/30/Integration-of-NCover-into-Team-City-for-Tech-Head-Brothers/
date: 3/30/2008 7:10:28 AM
updated: 4/28/2010 8:02:43 PM
disqusIdentifier: 20080330071028
tags: ["Tech Head Brothers", "continuous integration", "Team City", "unit test"]
alias:
 - /post/Integration-of-NCover-into-Team-City-for-Tech-Head-Brothers.aspx/index.html
---
Starting the development of the new [Tech Head Brothers](http://www.techheadbrothers.com/) in a remote multi developers environment I wanted to have some tooling to ease our work. For sure we have:

1.  A code repository: Subversion installed using [VisualSVN server](http://www.visualsvn.com/server/) 
<!-- more -->
2.  A continuous integration server: [Team City](http://www.jetbrains.com/teamcity/)   

The continuous integration MSBuild script is doing the following steps:

1.  Compiling the code checked out by [Team City](http://www.jetbrains.com/teamcity/) 
2.  Run [NUnit](http://www.nunit.org/index.php) tests 
3.  Run [NCover](http://www.ncover.com/) code coverage, **that's the new integration of today** 
4.  Precompile the website 
5.  Package the website 
6.  Deploy the website on IIS in a staging stage   

In Team City I have two configuration settings for the Portal project:

![](http://farm4.static.flickr.com/3275/2372322680_033772e5e5_o.jpg) 

1.  CI - Trunk - Unit Tests - Coverage - Deploy Staging: Run as Continuous integration with unit test, code coverage and deployment to iis 
2.  Daily - Trunk - Duplicate Finder: Run daily and find duplicates in our code   

Now for each build I can look at those information!

![](http://farm4.static.flickr.com/3098/2372333950_3b520ebc63_o.jpg) 

I can see that all my 35 tests passed, the changes made, the log of the build, Artifacts that I defined (more in a minute) and finally a new tab **Code Coverage Summary**.

**![](http://farm3.static.flickr.com/2267/2372340352_cfe56c226d_o.jpg)**

The unit tests are ok for a start but needs some more work as we can see! But ins't that cool to get the output directly in Team City! I love it.

And finally the artifacts tab

![](http://farm3.static.flickr.com/2012/2371509827_ab291ab62f_o.jpg)

On this tab I get the output that is shown on the tab Code Coverage Summary as a file that I can download; CoverageSummary.html generated by MSBuild script using NCover, I also get the folder Coverage on which I can click on the index.html file to get a full report of NCover as you can see:

![](http://farm3.static.flickr.com/2213/2371517047_6085955127_o.jpg)Â  

To get access to those Artifacts I needed to define in my settings the following:

![](http://farm4.static.flickr.com/3122/2372355906_4eabfb0f1d_o.jpg) 

And also modify the [Team City](http://www.jetbrains.com/teamcity/) server [main-config.xml as described here](http://www.jetbrains.net/confluence/display/TCD3/Including+Third-Party+Reports+in+the+Build+Results) with the following entries:

<report-tab title="Code Coverage Summary" basePath="" startPage="CoverageSummary.html" />      
<report-tab title="Code Coverage" basePath="/Coverage/" /> 

To integrate [NCover](http://www.ncover.com/) into my Continuous Build process made with MSBuild script I used [the documentation on that page](http://www.ncover.com/documentation/buildtasks).

**<u>Update</u>**: First take care that in the main-config there are already some report-tab configuration, and the name msut be unique. If the name is not unique then the first in the list will be taken. So I removed the predefined report-tab and modified the one from my last post to this:
 <report-tab title="Code Coverage Summary" basePath="" startPage="CoverageSummary.html" />     
<report-tab title="Code Coverage" basePath="Coverage" startPage="index.html" /> 
